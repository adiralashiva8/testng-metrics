<!DOCTYPE doctype html>
<html lang="en">
 <head>
 <link href="https://img.icons8.com/flat_round/64/000000/bar-chart.png" rel="shortcut icon" type="image/x-icon"/>
 <title>TestNG Metrics Report</title>
 <meta charset="utf-8"/>
 <meta content="width=device-width, initial-scale=1" name="viewport"/>
 <link href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css" rel="stylesheet"/>
 <link href="https://cdn.datatables.net/buttons/1.5.2/css/buttons.dataTables.min.css" rel="stylesheet"/>
 <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet"/>
 <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
 <script src="https://code.jquery.com/jquery-3.3.1.js" type="text/javascript"></script>
 <!-- Bootstrap core Googleccharts -->
 <script src="https://www.gstatic.com/charts/loader.js" type="text/javascript"></script>
 <script type="text/javascript">
 google.charts.load('current', {
 packages: ['corechart']
 });
 </script>
 <!-- Bootstrap core Datatable-->
 <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js" type="text/javascript"></script>
 <script src="https://cdn.datatables.net/buttons/1.5.2/js/dataTables.buttons.min.js" type="text/javascript"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js" type="text/javascript"></script>
 <script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.html5.min.js" type="text/javascript"></script>
 <script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.print.min.js" type="text/javascript"></script>
 <script src="https://cdn.datatables.net/buttons/1.6.1/js/buttons.colVis.min.js" type="text/javascript"></script>
 <style>
 body {font-family: -apple-system, sans-serif;background-color: #eeeeee;}
 .sidenav {height: 100%;width: 220px;position: fixed;z-index: 1;top: 0;left: 0;background-color: white;overflow-x: hidden;}
 .sidenav a {padding: 12px 10px 8px 12px;text-decoration: none;font-size: 18px;color: Black;display: block;}
 .main {padding-top: 10px;}
 @media screen and (max-height: 450px) {.sidenav {padding-top: 15px;}.sidenav a {font-size: 18px;}}
 .wrimagecard {margin-top: 0;margin-bottom: 0.6rem;border-radius: 10px;transition: all 0.3s ease;background-color: #f8f9fa;}
 .rowcard {padding-top: 10px;box-shadow: 12px 15px 20px 0px rgba(46, 61, 73, 0.15);border-radius: 15px;transition: all 0.3s ease;background-color: white;}
 .tablecard {background-color: white;font-size: 15px;}tr {height: 40px;}
 .dt-buttons {margin-left: 5px;}th, td, tr {text-align:center;vertical-align: middle;}
 .loader {position: fixed;left: 0px;top: 0px;width: 100%;height: 100%;z-index: 9999;
 background: url('https://i.ibb.co/cXnKsNR/Cube-1s-200px.gif') 50% 50% no-repeat rgb(249, 249, 249);}
 </style>
 </head>
</html>
<body>
 <div class="loader"></div>
 
	<div class="sidenav">
	 <a><img class="wrimagecard" src="https://i.ibb.co/FqtQyC5/rfh.png" style="height:20vh;max-width:98%;"/></a>
	 <a class="tablink" href="#" id="defaultOpen" onclick="openPage('dashboard', this, '#fc6666')"><i class="fa fa-dashboard" style="color:CORNFLOWERBLUE"></i> Dashboard</a>
	 <a class="tablink" href="#" onclick="openPage('classMetrics', this, '#fc6666'); executeDataTable('#cm',3)"><i class="fa fa-th-large" style="color:CADETBLUE"></i> Class Metrics</a>
 <a class="tablink" href="#" onclick="openPage('testMetrics', this, '#fc6666'); executeDataTable('#tm',3)"><i class="fa fa-list-alt" style="color:PALEVIOLETRED"></i> Test Metrics</a>
	 <a class="tablink" href="#" onclick="openPage('methodMetrics', this, '#fc6666'); executeDataTable('#mm',3)"><i class="fa fa-table" style="color:STEELBLUE"></i> Method Metrics</a>
	 <a class="tablink" href="#" onclick="openPage('log', this, '#fc6666');"><i class="fa fa-wpforms" style="color:CHOCOLATE"></i> Logs</a>
 	</div>
 
 <div class="main col-md-9 ml-sm-auto col-lg-10 px-4">
 <div class="tabcontent" id="dashboard">
 <div class="d-flex flex-column flex-md-row align-items-center p-1 mb-3 bg-light border-bottom shadow-sm rowcard">
 <h5 class="my-0 mr-md-auto font-weight-normal"><i class="fa fa-dashboard" style="color:CORNFLOWERBLUE"></i> Dashboard</h5>
 </div>
 <div class="row rowcard">
			<div class="col-md-6 border-right">
				<table style="width:100%;height:100px;text-align: center;">
					<tbody>
						<tr style="height:100%">
							<td>
								<table style="width:100%">
									<tbody>
										<tr style="height:100%">
											<td style="font-size:60px; color:rgb(105, 135, 219)">4</td>
											<td style="font-size:60px; color:#2ecc71">4</td>
										</tr>
										<tr>
											<td>
												<span style="color: #999999;font-size:12px">Total</span>
											</td>
											<td>
												<span style="color: #999999;font-size:12px">Pass</span>
											</td>
										</tr>
									</tbody>
								</table>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="col-md-6 borders">
				<table style="width:100%;height:100px;text-align: center;">
					<tbody>
						<tr style="height:100%">
							<td>
								<table style="width:100%">
									<tbody>
										<tr style="height:100%">
											<td style="font-size:60px; color:#fc6666">0</td>
											<td style="font-size:60px; color:#9E6B6A">0</td>
										</tr>
										<tr>
											<td>
												<span style="color: #999999;font-size:12px">Fail</span>
											</td>
											<td>												
												<span style="color: #999999;font-size:12px">Skip</span>
											</td>
										</tr>
									</tbody>
								</table>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
 <hr/>
 <div class="row rowcard">
 <div class="col-md-4" style="height:350px;width:auto;">
 <span style="font-weight:bold;color:gray">Test Status:</span>
 <div id="testChartID" style="height:280px;width:auto;"></div>
 </div>
 <div class="col-md-8" style="height:350px;width:auto;">
 <span style="font-weight:bold;color:gray">Top 5 Class Failures:</span>
 <div id="classBarID" style="height:300px;width:auto;"></div>
 </div>
 </div>
		 <hr/>
 <div class="row rowcard">
 <div class="col-md-12" style="height:450px;width:auto;">
 <span style="font-weight:bold;color:gray">Top 10 Test Performance(sec):</span>
 <div id="testsBarID" style="height:400px;width:auto;"></div>
 </div>
		 </div>
		 <hr/>
 <div class="row rowcard">
 <div class="col-md-12" style="height:450px;width:auto;">
 <span style="font-weight:bold;color:gray">Top 10 Config Methods Performance(sec):</span>
 <div id="methodsBarID" style="height:400px;width:auto;"></div>
 </div>
 </div>

 <div class="row">
			<div class="col-md-12" style="height:25px;width:auto;">
				<p class="text-muted" style="text-align:center;font-size:9px">
					<a href="https://github.com/adiralashiva8/testng-metrics" style="color:gray" target="_blank">testng-metrics</a>
				</p>
			</div>
		</div>

 <script>
 window.onload = function(){
 executeDataTable('#cm',3);
 executeDataTable('#tm',3);
 	executeDataTable('#mm',3);
 	createPieChart(4,0,0,'testChartID','Test Status:');
 	createBarGraph('#cm',0,3,5,'classBarID','Number of failures ','Class'); 
 	createBarGraph('#tm',1,3,10,'testsBarID','Elapsed Time(s) ','Test');
 	createBarGraph('#mm',1,3,10,'methodsBarID','Elapsed Time(s) ','Method');
 	};
 
 </script> 
 </div>
 <div class="tabcontent" id="classMetrics">
 <h4><b><i class="fa fa-th-large" style="color:CADETBLUE"></i> Class Metrics</b></h4>
 <hr/>
 <table class="table row-border tablecard" id="cm">
 <thead>
 <tr>
 <th>Class Name</th>
 <th>Total</th>
 <th>Passed</th>
 <th>Failed</th>
 <th>Skipped</th>
 <th>Pass (%)</th>
 </tr>
 </thead>
 <tbody>
<tr>
<td style="word-wrap: break-word;max-width: 300px; white-space: normal;text-align:left;">ParallelClassesTestOne</td>
<td style="color:teal">2</td>
<td style="color:green">2</td>
<td style="color:red">0</td>
<td style="color:#9E6B6A">0</td>
<td>100.0</td>
</tr>
 <tr>
<td style="word-wrap: break-word;max-width: 300px; white-space: normal;text-align:left;">ParallelClassesTestTwo</td>
<td style="color:teal">2</td>
<td style="color:green">2</td>
<td style="color:red">0</td>
<td style="color:#9E6B6A">0</td>
<td>100.0</td>
</tr>
  </tbody>
 </table>
 <div class="row">
 <div class="col-md-12" style="height:25px;width:auto;"></div>
 </div>
 </div>
 <div class="tabcontent" id="testMetrics">
 <h4><b><i class="fa fa-list-alt" style="color:PALEVIOLETRED"></i> Test Metrics</b></h4>
 <h6 style="text-align:right">Total Execution Time: <b style="color:Red; text-align:right">00:00:00</b></h6>
 <hr/>
 </h6>
 <table class="table row-border tablecard" id="tm">
 <thead>
 <tr>
 <th>Class Name</th>
 <th>Test Name</th>
 <th>Status</th>
 <th>Time(s)</th>
 <th>Error Message</th>
 </tr>
 </thead>
 <tbody>
<tr><td style="word-wrap: break-word;max-width: 200px; white-space: normal; text-align:left">ParallelClassesTestTwo</td>
<td style="word-wrap: break-word;max-width: 250px; white-space: normal;; text-align:left">testMethodOne</td>
<td style="color: green">PASS</td>
<td style="text-align:center">0</td>
<td style="word-wrap: break-word;max-width: 300px; white-space: normal; text-align:left"></td>
</tr>
<tr><td style="word-wrap: break-word;max-width: 200px; white-space: normal; text-align:left">ParallelClassesTestOne</td>
<td style="word-wrap: break-word;max-width: 250px; white-space: normal;; text-align:left">testMethodTwo</td>
<td style="color: green">PASS</td>
<td style="text-align:center">0</td>
<td style="word-wrap: break-word;max-width: 300px; white-space: normal; text-align:left"></td>
</tr>
<tr><td style="word-wrap: break-word;max-width: 200px; white-space: normal; text-align:left">ParallelClassesTestTwo</td>
<td style="word-wrap: break-word;max-width: 250px; white-space: normal;; text-align:left">testMethodTwo</td>
<td style="color: green">PASS</td>
<td style="text-align:center">0</td>
<td style="word-wrap: break-word;max-width: 300px; white-space: normal; text-align:left"></td>
</tr>
<tr><td style="word-wrap: break-word;max-width: 200px; white-space: normal; text-align:left">ParallelClassesTestOne</td>
<td style="word-wrap: break-word;max-width: 250px; white-space: normal;; text-align:left">testMethodOne</td>
<td style="color: green">PASS</td>
<td style="text-align:center">0</td>
<td style="word-wrap: break-word;max-width: 300px; white-space: normal; text-align:left"></td>
</tr>
 </tbody>
 </table>
 <div class="row">
 <div class="col-md-12" style="height:25px;width:auto;"></div>
 </div>
 </div>
 <div class="tabcontent" id="methodMetrics">
 <h4><b><i class="fa fa-table" style="color:STEELBLUE"></i> Method Metrics</b></h4>
 <hr/>
 <table class="table row-border tablecard" id="mm">
 <thead>
 <tr>
 <th>Class Name</th>
 <th>Method Name</th>
 <th>Status</th>
 <th>Time(s)</th>
 <th>Error Message</th>
 </tr>
 </thead>
 <tbody>
<tr><td style="word-wrap: break-word;max-width: 200px; white-space: normal; text-align:left">ParallelClassesTestOne</td>
<td style="word-wrap: break-word;max-width: 250px; white-space: normal;; text-align:left">afterClass</td>
<td style="color: green">PASS</td>
<td style="text-align:center">0</td>
<td style="word-wrap: break-word;max-width: 300px; white-space: normal; text-align:left"></td>
</tr>
<tr><td style="word-wrap: break-word;max-width: 200px; white-space: normal; text-align:left">ParallelClassesTestOne</td>
<td style="word-wrap: break-word;max-width: 250px; white-space: normal;; text-align:left">beforeClass</td>
<td style="color: green">PASS</td>
<td style="text-align:center">0</td>
<td style="word-wrap: break-word;max-width: 300px; white-space: normal; text-align:left"></td>
</tr>
<tr><td style="word-wrap: break-word;max-width: 200px; white-space: normal; text-align:left">ParallelClassesTestTwo</td>
<td style="word-wrap: break-word;max-width: 250px; white-space: normal;; text-align:left">afterClass</td>
<td style="color: green">PASS</td>
<td style="text-align:center">0</td>
<td style="word-wrap: break-word;max-width: 300px; white-space: normal; text-align:left"></td>
</tr>
<tr><td style="word-wrap: break-word;max-width: 200px; white-space: normal; text-align:left">ParallelClassesTestOne</td>
<td style="word-wrap: break-word;max-width: 250px; white-space: normal;; text-align:left">beforeClass</td>
<td style="color: green">PASS</td>
<td style="text-align:center">0</td>
<td style="word-wrap: break-word;max-width: 300px; white-space: normal; text-align:left"></td>
</tr>
<tr><td style="word-wrap: break-word;max-width: 200px; white-space: normal; text-align:left">ParallelClassesTestTwo</td>
<td style="word-wrap: break-word;max-width: 250px; white-space: normal;; text-align:left">beforeClass</td>
<td style="color: green">PASS</td>
<td style="text-align:center">0</td>
<td style="word-wrap: break-word;max-width: 300px; white-space: normal; text-align:left"></td>
</tr>
 </tbody>
 </table>
 <div class="row">
 <div class="col-md-12" style="height:25px;width:auto;"></div>
 </div>
 </div>
<div class="tabcontent" id="log" style="display: block;"><p style="text-align:right">**<b>index.html</b> need to be in current folder in order to display here</p>
<div class="embed-responsive embed-responsive-4by3"><iframe class="embed-responsive-item" src="index.html"></iframe></div></div> <script>
 function createPieChart(passed, failed, skipped, ChartID, ChartName) {
 var status = [];
 status.push(['Status', 'Percentage']);
 status.push(['PASS', parseInt(passed)], ['FAIL', parseInt(failed)],['SKIP', parseInt(skipped)]);
 var data = google.visualization.arrayToDataTable(status);
 var options = {
 pieHole: 0.6,
 legend: 'none',
 chartArea: {
 width: "95%",
 height: "90%"
 },
 colors: ['#2ecc71','#fc6666','#CCCC00'],
 };
 var chart = new google.visualization.PieChart(document.getElementById(ChartID));
 chart.draw(data, options);
 }
 </script>
 <script>
 (function () {
 var textFile = null,
 makeTextFile = function (text) {
 var data = new Blob([text], {
 type: 'text/plain'
 });
 if (textFile !== null) {
 window.URL.revokeObjectURL(textFile);
 }
 textFile = window.URL.createObjectURL(data);
 return textFile;
 };
 var create = document.getElementById('create'),
 textbox = document.getElementById('textbox');
 create.addEventListener('click', function () {
 var link = document.getElementById('downloadlink');
 link.href = makeTextFile(textbox.value);
 link.style.display = 'block';
 }, false);
 })();
 </script>
 <script>
 function createBarGraph(tableID, keyword_column, time_column, limit, ChartID, Label, type) {
 var status = [];
 css_selector_locator = tableID + ' tbody >tr'
 var rows = $(css_selector_locator);
 var columns;
 var myColors = ['#4F81BC','#C0504E','#9BBB58','#24BEAA','#8064A1','#4AACC5','#F79647','#815E86','#76A032','#34558B'];
 status.push([type, Label, {role: 'annotation'}, {role: 'style'}]);
 for (var i = 0; i < rows.length; i++) {
 if (i == Number(limit)) {
 break;
 }
 //status = [];
 name_value = $(rows[i]).find('td');
 time = ($(name_value[Number(time_column)]).html()).trim();
 keyword = ($(name_value[Number(keyword_column)]).html()).trim();
 status.push([keyword, parseFloat(time), parseFloat(time), myColors[i]]);
 }
 var data = google.visualization.arrayToDataTable(status);
 var options = {
 legend: 'none',
 chartArea: { width: "92%", height: "75%"},
 bar: { groupWidth: '90%'},
 annotations: {
 alwaysOutside: true,
 textStyle: {
 fontName: 'Comic Sans MS',fontSize: 13,bold: true,italic: true,color: "black", },
 },
 hAxis: {
 textStyle: {fontName: 'Arial',fontSize: 10,}
 },
 vAxis: {
 gridlines: {count: 10},
 textStyle: {fontName: 'Comic Sans MS',fontSize: 10,}
 },
 };
 var chart = new google.visualization.ColumnChart(document.getElementById(ChartID));
 chart.draw(data, options);
 }
 
 </script>
 
 <script>
	 function executeDataTable(tabname,sortCol) {
			var fileTitle;
			switch(tabname) {
				case "#cm":
					fileTitle = "ClassMetrics";
					break;
				case "#tm":
					fileTitle = "TestMetrics";
					break;
				case "#mm":
					fileTitle = "MethodMetrics";
					break;
				default:
					fileTitle = "metrics";
			}

			$(tabname).DataTable(
				{
					retrieve: true,
					"order": [[ Number(sortCol), "desc" ]],
					dom: 'l<".margin" B>frtip',
					buttons: [
						{
							extend: 'copyHtml5',
							text: '<i class="fa fa-files-o"></i>',
							filename: function() {
								return fileTitle + '-' + new Date().toLocaleString();
							},
							titleAttr: 'Copy',
							exportOptions: {
								columns: ':visible'
							}
						},

						{
							extend: 'csvHtml5',
							text: '<i class="fa fa-file-text-o"></i>',
							titleAttr: 'CSV',
							filename: function() {
								return fileTitle + '-' + new Date().toLocaleString();
							},
							exportOptions: {
								columns: ':visible'
							}
						},

						{
							extend: 'excelHtml5',
							text: '<i class="fa fa-file-excel-o"></i>',
							titleAttr: 'Excel',
							filename: function() {
								return fileTitle + '-' + new Date().toLocaleString();
							},
							exportOptions: {
								columns: ':visible'
							}
						},
						{
							extend: 'print',
							text: '<i class="fa fa-print"></i>',
							titleAttr: 'Print',
							exportOptions: {
								columns: ':visible',
								alignment: 'left',
							}
						},
						{
							extend: 'colvis',
							collectionLayout: 'fixed two-column',
							text: '<i class="fa fa-low-vision"></i>',
							titleAttr: 'Hide Column',
							exportOptions: {
								columns: ':visible'
							},
							postfixButtons: [ 'colvisRestore' ]
						},
					],
					columnDefs: [ {
						visible: false,
					} ]
				}
			);
		}
	 </script>
 

	 <script>
	 function openPage(pageName,elmnt,color) {
			var i, tabcontent, tablinks;
			tabcontent = document.getElementsByClassName("tabcontent");
			for (i = 0; i < tabcontent.length; i++) {
				tabcontent[i].style.display = "none";
			}
			tablinks = document.getElementsByClassName("tablink");
			for (i = 0; i < tablinks.length; i++) {
				tablinks[i].style.color = "";
			}
			document.getElementById(pageName).style.display = "block";
			elmnt.style.color = color;

		}
		// Get the element with id="defaultOpen" and click on it
		document.getElementById("defaultOpen").click();
	 </script>
	 <script>
	 // Get the element with id="defaultOpen" and click on it
		document.getElementById("defaultOpen").click();
	 </script>
	 <script>
	 $(window).on('load',function(){$('.loader').fadeOut();});
	 </script>

 </div>
</body>
</html>